# 接口文档

## 数据展示

### 折线图

请求地址：

请求类型：get

请求参数

| 参数名   | 类型   | 是否必须 | 描述     |
| -------- | ------ | -------- | -------- |
| date  | string | 是       | 截至时间 |
| country  | string | 是       | 国家类别 |
| province | string | 是       | 省份类别 |
| city     | string | 是       | 城市类别 |

示例

```json
var data = {
    "date" : "2020-3-31",
    "country": "china",
    "province": "guangdong",
    "city": "guangzhou"
}
```

返回参数

| 参数名 | 类型  | 是否必须 | 描述                                             |
| ------ | ----- | -------- | ------------------------------------------------ |
| date   | array | 是       | 返回时间段                                       |
| detail | array | 是       | 二维数组，分别返回确诊人数、治愈人数、死亡人数。 |
|        |       |          |                                                  |

示例

```
var data = {
    "date": [...],
    "detail": [...]
}
```

### 热点图

请求地址：

请求类型：get

请求参数

| 参数名 | 类型   | 是否必须 | 描述             |
| ------ | ------ | -------- | ---------------- |
| type   | string | 是       | “累计”或者“当天” |
| country  | string | 是       | 热点图区域的国家类别 |
| province | string | 否       | 热点图区域的省份类别 |

示例

```json
var data = {
    "type": "today",
    "country": "china",
    "province": "HK"
}
```

返回参数

| 参数名 | 类型   | 是否必须 | 描述                 |
| ------ | ------ | -------- | -------------------- |
| country  | string | 是       | 热点图区域的国家类别 |
| province | string | 否       | 热点图区域的省份类别 |
| detail | array  | 是       | 每个地区的名称及数据 |

示例

```
var data = {
    "country": "china",
    "province": "HK",
    "detail": [...
        {
            "name": "地区名",
            "confirmed": "112",
            "cured": "123",
            "death": "123",
            
        }
    ]
}
```

### 柱状图

请求地址：

请求类型：get

请求参数

| 参数名 | 类型   | 是否必须 | 描述           |
| ------ | ------ | -------- | -------------- |
| type   | string | 是       | “累计”或“当天” |

示例

```
var data = {
    "type": "today"
}
```

返回参数

| 参数名    | 类型  | 是否必须 | 描述                                                     |
| --------- | ----- | -------- | -------------------------------------------------------- |
| provinces | array | 是       | 省份列表                                                 |
| detail    | array | 是       | 多维数组。各省份新增确诊人数、新增治愈人数、新增死亡人数 |

示例

```
var data = {
    "provinces": [...],
    "detail": [...[...]]
}
```

### 饼状图

请求地址：

请求类型：get

请求参数

| 参数名 | 类型   | 是否必须 | 描述                   |
| ------ | ------ | -------- | ---------------------- |
| type   | string | 是       | “男女比例”或“年龄分布” |

返回参数

| 参数名 | 类型  | 是否必须 | 描述                 |
| ------ | ----- | -------- | -------------------- |
| series | array | 是       | 男女或年龄的分段数组 |
| detail | array | 是       | 详细数据             |

示例

```
var data = {
    "series": ["男","女"],
    "detail": [...{
        "name": "类别名称",
        "value": "数据"
    }]
}
```

## 数据上传

请求地址：

请求类型：post

请求参数

| 参数名 | 类型          | 是否必须 | 描述                                       |
| ------ | ------------- | -------- | ------------------------------------------ |
| data   | array[object] | 是       | 多条需上传的数据                           |
| date   | object        | 是       | 时间                                       |
| area   | object        | 是       | 地区                                       |
| detail | object        | 是       | 确诊、死亡、治愈人数、男女人数、年龄段人数 |

示例

```
var data = [...{
    "date": {
        "year": 2020,
        "month": 3,
        "day": 24
    },
    "area": {
        "country": "china",
        "province": "guangdong",
        "city": "guangzhou"
    },
    "detail": {
        "confirmed": 2000,
        "deaths": 70,
        "recovered": 1930,
        "male": 1000,
        "female": 1000,
        "age1": 50,
        "age2": 100
    }
}]
```

返回参数

| 参数名  | 类型 | 是否必须 | 描述         |
| ------- | ---- | -------- | ------------ |
| errcode | int  | 是       | 是否上传成功 |

## 下载数据

暂定

## 登录注册

### 登录

请求地址：

请求类型：get

请求参数

| 参数名   | 类型   | 是否必须 | 描述   |
| -------- | ------ | -------- | ------ |
| username | string | 是       | 用户名 |
| pwd      | string | 是       | 密码   |

返回参数

| 参数名  | 类型   | 是否必须 | 描述     |
| ------- | ------ | -------- | -------- |
| errcode | int    | 是       | 登录状态 |
| errmsg  | string | 否       | 错误信息 |

### 注册

请求地址：

请求类型；post

请求参数

| 参数名   | 类型   | 是否必须 | 描述   |
| -------- | ------ | -------- | ------ |
| username | string | 是       | 用户名 |
| pwd      | string | 是       | 密码   |
|          |        |          |        |


### 数据库数据格式
使用mysql数据库(all english)
| date | country  | province | city  | confirmed | cured| death
| ------- | ------ | -------- | -------- |-------- | -------- |-------- | -------- |
| DATE YYYY-MM-DD (not null)| VARCHAR(20) (not null)   | VARCHAR(20)| VARCHAR(20)| INT(not null default 0) | INT(not null default 0) | INT(not null default 0)|


# DDL

- 3.24 - 4.6 后端基本完成，前端完成UI和基本功能
- 4.6 - 4.13 进行API对接
- 4.13 - 4.20 进行完善和调试